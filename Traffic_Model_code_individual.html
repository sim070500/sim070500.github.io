<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Basic Page Needs
    ================================================== -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Traffic Model | EJ Blog</title>

    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">

    <!-- Mobile Specific Metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,600,700" rel="stylesheet">
    <script src="https://kit.fontawesome.com/018abb2f7f.js" crossorigin="anonymous"></script>

    <!-- Favicon
    ================================================== -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon.png">

    <!-- Stylesheets
    ================================================== -->
    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/responsive.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        inlineMath: [['$','$']]
      }
    });
  </script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
        type="text/javascript"></script>

</head>

<body>

    <header id="masthead" class="site-header site-header-white">
        <nav id="primary-navigation" class="site-navigation">
            <div class="container">



                <div class="navbar-header">

                    <a class="site-title"><span>EJ Blog</span>- Exploring in complex system</a>

                </div><!-- /.navbar-header -->

                <div class="collapse navbar-collapse" id="agency-navbar-collapse">

                    <ul class="nav navbar-nav navbar-right">


                        <li><a href="index.html">Home</a></li>

                        <li><a href="profile.html">Profile</a></li>
                        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Researches<i
                                    class="fa fa-caret-down hidden-xs" aria-hidden="true"></i></a>

                            <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                                <li><a href="Traffic_Model.html">Traffic Model</a></li>
                                <li><a href="Tumor_Morphology.html">Tumor Morphology</a></li>
                                <!--<li><a href="MIPS.html">Motility Induced Phase Seperation</a></li>-->

                            </ul>

                        </li>

                        <li><a href="Publication.html">Publication</a></li>



                    </ul>

                </div>

            </div>
        </nav><!-- /.site-navigation -->
    </header><!-- /#mastheaed -->

    <div id="hero" class="hero overlay subpage-hero portfolio-hero-traffic">
        <div class="hero-content">
            <div class="hero-text">
                <h1>Traffic Model</h1>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Traffic Model</li>
                </ol>
            </div><!-- /.hero-text -->
        </div><!-- /.hero-content -->
    </div><!-- /.hero -->

    <main id="main" class="site-main">
        <section class="site-section subpage-site-section section-portfolio" style="background-color: #FFFFFF">
            <div class="container">
                <ul class="portfolio-sorting list-inline text-center">
                    <li><a href="Traffic_Model.html" class="btn btn-gray" data-group="introduction">Introduction</a>
                    </li>
                    <li><a href="Traffic_Model_code_bando.html" class="btn btn-gray"
                            data-group="codeidentical">Code-Bando Model</a></li>
                    <li><a href="./Traffic_Model_individual.html" class="btn btn-gray"
                            data-group="individual">Individual Difference</a></li>
                    <li><a href="./Traffic_Model_code_individual.html" class="btn btn-gray"
                            data-group="codeindividual">Code-Individual</a></li>
                </ul><!-- /.portfolio-sorting  -->




                <div class="row">
                    <div style="padding: 10px 0px;"></div>
                    <div class="text-center">
                        <h2 class="heading-separator">Simulation For Individual Difference</h2>
                        <p class="subheading-text"> Introduction of simulation for the model with individual difference
                        </p>
                    </div>

                </div>
                <div class="row">
                    <div style="padding: 10px 0px;"></div>
                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                        <p style="font-size:130%; color: black; line-height:130%">These are the jupyter-notebook code we present here and the complete python code for finding other properties.</p>

                        <div style="padding: 8px 0px;"></div>
                        <ul>
                            <li><b>jupyter-notebook code</b>
                                <a class="downloadfile-bg" href="Traffic/jupytercode_individual.ipynb"
                                    download="traffic_individual.ipynb" target="_blank"><i class="fa fa-file"></i></a>
                            </li>
                            <li><b>python code</b>
                                <a  href="Traffic/individual.zip"
                                    download="individual.zip" target="_blank"><i class="fa-brands fa-python"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="row">

                    <div style="padding:10px 0px;"></div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                        <p style="font-size:150%; color: black; line-height:130%" class="align-distribute">

                            <span class="tab"></span>Based on the code we wrote in Bando's model, we only need to slightly change our simulations. First of all, the equilibrium condition will occur when
			    $$
			    w_n \Delta x_n = \text{Const}
			    $$
			    with the constraint 
			    $$
			    \sum_n \Delta x_n = L,
			    $$
			    where L is the track length. Therefore, we define a function to find the equilibrium state. To calculate, we call the constat "A," and thus $\Delta x_n = A/w_n$. Therefore,
			    $$
			    A = \frac{L}{\sum_n 1/w_n}.
			    $$
			    We can use this to find out the initial position of all vehicles.

                        </p>
                    </div>
                </div>


                <div class="row">

                    <div style="padding:10px 0px;"></div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                        <pre>def fixed_solution(length, totalcarn, w):

    denominator = 0
    for i in w:
        denominator += 1/i
    A = length / denominator
    delta_x_i = A/w

    initial_position = [0]
    for i in range(0, len(delta_x_i)-1):
        initial_position.append(initial_position[len(initial_position)-1]+delta_x_i[i])

    return np.array(initial_position)</pre>
                    </div>
                </div>

                <div class="row">

                    <div style="padding:10px 0px;"></div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                        <p style="font-size:150%; color: black; line-height:130%" class="align-distribute">

                            <span class="tab"></span>Next, we define two variables: "totalcarn" and "length," which specify the number of vehicles on the track and the length of the track. In this case, the total vehicle number is defined as 32. Since the track we are investigating is circular, the radius can be quickly found and defined as variable "r." Moreover, because we plan to investigate the condition that a steady flow transits to a traffic jam, the initial condition will be set such that the angular differences between vehicles are the same. The constant angular difference is defined as "alpha." The variable background, fig, and ax are used for plotting background tracks and plotting.
                        </p>
                    </div>
                </div>

                <div class="row">

                    <div style="padding:10px 0px;"></div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                        <pre>totalcarn = 2**5
length = totalcarn*6
r = length/(2*np.pi)
alpha = 2*np.pi/totalcarn 
background = np.linspace(0, 2*np.pi, 100)
fig, ax = plt.subplots()</pre>
                    </div>
                </div>

		<div class="row">

                    <div style="padding:10px 0px;"></div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                        <p style="font-size:150%; color: black; line-height:130%" class="align-distribute">

                            <span class="tab"></span>Now, we can set the initial condition and simulate. In this case, I denote the maximum value of the difference between current persection distance and the initial perception distance. Apparently, if a jam will occur in a traffic system, the difference will become larger. By comparing the result of identical drivers and drivers with individual difference, we can observe that the introduction of individual difference suppress tha jamming transition! See Fig. 1 for the case of drivers with individual difference, Fig 2. for the case of identical driver.
                        </p>
                    </div>
                </div>

                
                

                <div class="row">

                    <div style="padding:10px 0px;"></div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">

                        <pre>w = np.random.normal(1, 0.1, totalcarn) # w = np.random.normal(1, 0, totalcarn) for identical drivers
x = fixed_solution(length, totalcarn, w)
idealdeltax = w[0]*(x[1]-x[0])

v = np.full(totalcarn, np.tanh(idealdeltax-2)+np.tanh(2))
theorysense = 2*(1/np.cosh(length/totalcarn-2)**2)/(np.cos(alpha/2)**2)
coefficient = -0.02
sense = theorysense + coefficient
perturbe = 0.001*np.sin(x)

x = x+perturbe
simulationtime = 0
denote = []
denotetime = []
totaltime = 0
while simulationtime < 2162237:

    deltax = deltaxfunction(length, x)
    dt = np.min(deltax/v)*0.01

    k1x = v
    k1v = sense * (np.tanh(w*deltax-2)+np.tanh(2) - v)
    k2x = v + (dt * k1v * 0.5)
    k2v = sense * (np.tanh(w*deltaxfunction(length, x+(0.5*dt*k1x))-2)+np.tanh(2) - (v+(0.5*dt*k1v)))
    k3x = v + (dt * k2v * 0.5)
    k3v = sense * (np.tanh(w*deltaxfunction(length, x+(0.5*dt*k2x))-2)+np.tanh(2) - (v+(0.5*dt*k2v)))
    k4x = v + (dt * k3v)
    k4v = sense * (np.tanh(w*deltaxfunction(length, x+(dt*k3x))-2)+np.tanh(2) - (v+(dt*k3v)))
    x += dt*(k1x+2*k2x+2*k3x+k4x)/6
    v += dt*(k1v+2*k2v+2*k3v+k4v)/6
    simulationtime += 1
    totaltime += dt
    
    
    if simulationtime % 1000 == 0 :
        print(simulationtime)
        delta = w*deltaxfunction(length, x)
        denote.append(max(abs(delta-idealdeltax)))
        denotetime.append(totaltime)
        

ax.plot(denotetime, denote, 'ro')</pre>
                    </div>
                </div>
		<div class="row">

                    <div style="padding:10px 0px;"></div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                        <figure class="text-center" id="myfigure">
                            <img src="./Traffic/indi.png" width="600" height="400" />
                            <figcaption>Fig. 1 - The diffence for the case of drivers with individual difference. x-axis presents the time and y axis present the maximum value of the absolute value of the difference.</figcaption>
                        </figure>
			<figure class="text-center" id="myfigure">
                            <img src="./Traffic/noindi.png" width="600" height="400" />
                            <figcaption>Fig. 2 - The diffence for the case of identical drivers. x-axis presents the time and y axis present the maximum value of the absolute value of the difference.</figcaption>
                        </figure>
                    </div>
                </div>
		

                
            </div>
	    
        </section><!-- /.section-features -->










    </main><!-- /#main -->

    <footer id="colophon" class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-sm-4 col-xs-6">
                    <a class="site-title"><span>EJ </span> - A Complex System Researcher</a>
                    <p>I focus on nonlinear dynamics and pattern formation in living systems. Current project relating to tumor morphology, motility-induced phase separation, and non-equilibrium properties of active matter.</p>
                </div>
                <div class="col-lg-offset-4 col-md-3 col-sm-4 col-md-offset-2 col-sm-offset-0 col-xs-6 ">
                    <h3>Keep in touch</h3>
                    <ul class="list-unstyled contact-links">
                        <li><i class="fa fa-envelope" aria-hidden="true"></i><a
                                href="mailto:sim108022503@gapp.nthu.edu.tw">sim108022503@gapp.nthu.edu.tw</a></li>
                        <li><i class="fa fa-envelope" aria-hidden="true"></i><a
                                href="mailto:yichieh_lai@mx.nthu.edu.tw">yichieh_lai@mx.nthu.edu.tw</a></li>
                    </ul>
                </div>
                <div class="clearfix visible-xs"></div>
            </div>
        </div>
        <div class="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-xs-8">
                        <div class="social-links">
                            <a class="github-bg" href="https://github.com/sim070500" target="_blank"><i
                                    class="fa fa-github"></i></a>
                        </div><!-- /.social-links -->
                    </div>
                    <div class="col-xs-4">
                        <div class="text-right">
                            <p>&copy; AgencyPerfect</p>
                            <p>All Rights Reserved</p>
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- /.copyright -->
    </footer><!-- /#footer -->



    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/bootstrap-select.min.js"></script>
    <script src="assets/js/jquery.slicknav.min.js"></script>
    <script src="assets/js/jquery.countTo.min.js"></script>
    <script src="assets/js/jquery.shuffle.min.js"></script>
    <script src="assets/js/script.js"></script>

</body>

</html>
